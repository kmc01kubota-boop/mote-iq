import { FactorKey } from "@/types";

export const factorDetails: Record<FactorKey, { title: string; detail: string }> = {
  cleanliness: {
    title: "清潔感・生活感コントロール",
    detail: `清潔感とは「清潔であること」ではない。相手の本能に「この男は安全だ、信頼に足る」と錯覚させる非言語シグナルの総体だ。

爪が整っている、服にシワがない、靴が手入れされている。これらは単なる身だしなみではない。「自分という商品の見せ方を完全にコントロールできる人間である」という証明書だ。

35歳を超えると、加齢臭・歯の黄ばみ・肌のくすみが加速度的に進行する。放置した者から順に「恋愛市場の外」へと追放されていく。これは残酷な現実だが、逆に言えば、ここを制した者は同世代の中で圧倒的なアドバンテージを得る。

重要なのは「やりすぎない」こと。美容に入れ込みすぎる男は、女性から見ると「自分のことしか見ていないナルシスト」として分類される。目指すべきは「自然に整っている」状態。手入れの痕跡を感じさせず、しかし確実に清潔である。この矛盾を両立できた者だけが「育ちがいい」というラベルを手に入れる。

デート前日の5点チェック（爪/鼻毛/眉/歯/服のにおい）をルーティン化せよ。靴は2足をローテーションし、月1回はプロのクリーニングに出せ。香水はワンプッシュを手首の内側に。「何かいい匂いする？」と相手に聞かれるくらいがベストだ。聞かれない程度は論外、聞かれる前に気づかれるのは過剰。

部屋の清潔感も見逃すな。いつ「うち来る？」と言っても恥ずかしくない状態を365日キープすることは、自己管理能力そのものの証明になる。部屋が汚い男に「この人となら将来を考えられる」と思う女はいない。`,
  },
  conversation: {
    title: "会話の余白力",
    detail: `「話がうまい男」がモテるわけではない。「一緒にいて心地よい会話ができる男」がモテる。この差を理解できない男が、永遠に「いい人止まり」で終わる。

余白とは、相手が自由に話せるスペースのこと。質問攻めにするのは面接官、自分語りに終始するのは独演会。どちらも「一緒にいて疲れる男」として記憶される。

35歳以上の男が犯す致命的な過ちがある。「アドバイス」と「自慢話」だ。相手が悩みを話したとき、解決策を提示するのは男の本能だが、多くの場合、相手は「聞いてほしかっただけ」なのだ。30分の的確な分析より、「それ大変だったね」の一言が効く。この事実を受け入れられない男は、永遠に「正論を言う疲れる人」のままだ。

LINEでも同じ原則が適用される。即レスは好印象ではない。むしろ「この人、暇なのかな」という印象を与える。相手のテンポに合わせ、時には1〜2時間空けるのも「余白」だ。絵文字の量も相手に合わせろ。文末の「笑」の頻度すら無意識に読まれている。合わせられない男は「空気が読めない」とラベリングされる。

実践的なコツを一つ教える。相手の話に対して「その後どうなったの？」「それってどういう気持ちだった？」と感情面を拾う質問をすること。事実の確認は会議室でやれ。デートでやるべきは感情への共鳴だ。

沈黙を恐れるな。二人の間に訪れる沈黙は、信頼のバロメーターだ。沈黙に耐えられずベラベラ喋る男は「自信がない」と見透かされる。心地よい沈黙を共有できるようになれば、関係性は確実に深まっている。`,
  },
  money: {
    title: "金と余裕の見せ方",
    detail: `金の使い方は、その男の器量をそのまま映し出す。

金遣いが荒いのは論外だが、ケチな男はそれ以下だ。「堅実」と「夢を見せられない」は別物である。あなたが「節約家」だと思っている振る舞いは、相手からすれば「この人と一緒にいても楽しい未来が見えない」というシグナルに過ぎない。

重要なのは「いくら使ったか」ではなく「どう使ったか」。10万円の食事でも、高級店であることをアピールする男は器が小さく見える。一方、3,000円の居酒屋でも「ここの焼き鳥は本当にうまいんだ」とこだわりを語れる男は魅力的に映る。金額ではなく「選択の美学」で勝負せよ。

会計のスマートさは必須スキルだ。テーブル会計ができる店を選ぶ、事前にカードを渡しておく、トイレに立ったタイミングで済ませる。相手に「払うか払わないか」の判断を迫る時点で三流だ。ただし、毎回全額出す必要はない。大事なのは「出す/出さない」を自分の基準で決められること。判断を相手に委ねる男に、女は身を委ねない。

お店のストックは最低5軒持て。初回向きのカジュアルな店、少し特別な日の店、バー、ランチで使える店、テイクアウトが美味しい店。シーンに応じて自然に提案できることが「余裕」の正体だ。「どこでもいいよ」と言う男は、リーダーシップの欠如を自白している。

プレゼントは金額ではなく「相手を見ているか」がすべて。会話の中でポロッと出た「これ気になる」を覚えておき、後日さりげなく渡す。これが最もコスパの高い金の使い方だ。高価なブランド物を渡して「これで好かれるだろう」と思う男は、相手を金で買おうとしていることに気づいていない。

年収をほのめかす言動は即アウト。車のグレード、時計のブランド、タワマンの階数。どれも自分から出す話題ではない。本当に余裕がある男は、余裕を見せない。見せる必要がないからだ。`,
  },
  distance: {
    title: "距離感と安心感",
    detail: `距離感の制御は、恋愛における最高難度のスキルだ。そして、最も多くの男が失敗する領域でもある。

近づきすぎれば「重い」「怖い」と思われ、離れすぎれば「興味がない」と誤解される。このバランスを相手ごとにリアルタイムで調整し続ける必要がある。正解は一つではなく、相手の性格、関係性のフェーズ、その日の気分によって変動する。

最も重要な原則は「一歩引く勇気」だ。好意がある相手には近づきたくなるのが人間の本能だが、その本能に従う男は負ける。既読スルーされたら追撃しない。誘いが曖昧なら一旦引く。断られたら理由を聞かない。この「余裕」が、逆説的に相手の興味を引く。追えば逃げ、引けば寄ってくる。恋愛の力学を理解せよ。

物理的な距離感も重要だ。初対面ではテーブルを挟んだ距離が安心を与える。2回目以降、カウンター席に移行できれば親密度が上がる。相手の表情やボディランゲージを常に観察し、緊張しているなら距離を取り、リラックスしているなら少しだけ近づく。このチューニングができない男は「空気が読めない」の烙印を押される。

SNSの距離感も見落とすな。相手の投稿すべてにいいねを押す、ストーリーに毎回リアクションする。これは好意のアピールではなく「監視」に映る。相手は「この人、ちょっと怖い」と感じている。適度な無関心は、自分の人生が充実していることの証拠でもある。暇そうな男にモテる要素はない。

安心感を与えるコツは「予測可能性」だ。約束を守る、時間に遅れない、言ったことを覚えている。小さな一貫性の積み重ねが、相手の中に「この人は信頼できる」という感覚を育てていく。逆に言えば、一度でも約束を破れば、それまで積み上げた信頼は一瞬で崩壊する。`,
  },
  sexAppeal: {
    title: "大人の色気",
    detail: `色気とは「性的な魅力」のことではない。「生命力と余裕が滲み出る佇まい」のことだ。ここを勘違いしている男が多すぎる。

視線の使い方一つで印象は激変する。相手の目をじっと見続けるのは威圧感を与える。一方で目を合わせないのは自信のなさを露呈する。理想は「2〜3秒見つめて、ふっと外す」リズム。この「外し」の瞬間にこそ色気が宿る。見つめ続ける男はストーカー予備軍、目を合わせない男は存在感ゼロ。どちらも論外だ。

声のトーンも強力な武器だ。落ち着いた低めの声で、ゆっくり話せ。特に「ありがとう」「お疲れさま」などの短いフレーズを丁寧に発すると、声の魅力は倍増する。早口は焦りの表れ。ゆとりある話し方は、内面の余裕を感じさせる。声を制する者は、印象を制する。

食事の所作は意外と見られている。箸の持ち方、食べる速度、グラスの持ち方。「育ちの良さ」はここに出る。完璧である必要はないが、最低限のマナーは大人の嗜みだ。クチャクチャ音を立てて食べる男に「この人と将来を」と思う女はいない。所作は、その人間の履歴書だ。

ボディタッチは最もリスクの高い色気演出だ。間違えれば一発でアウト、下手すれば通報される。安全なのは「手渡し」の瞬間の指先の触れ合い、エスコート時の背中への軽い誘導、別れ際の手を振る動作。相手の反応を0.5秒で読み取り、わずかでも引いている気配があれば即座に距離を取れ。鈍感な男は加害者になる。

別れ際の余韻は色気の集大成。「今日楽しかった、ありがとう」と言った後の2秒の間。相手の目を見て、少しだけ微笑んで、振り返らずに去る。この「名残」が、次に会いたいという気持ちを相手の中に生む。ダラダラ別れを惜しむ男は、余韻を殺している。`,
  },
};

export const mineActions: { title: string; description: string }[] = [
  {
    title: "食事中にスマホをテーブルに置く",
    description:
      "あなたがスマホをテーブルに置いた瞬間、彼女は内心で舌打ちをしている。「ああ、この人は私との時間より、どうでもいい通知の方が大事なのね」と。その時点で、あなたは『その他大勢』のフォルダに分類されたと心得よ。画面を上にして置くのは論外中の論外。それは「あなたより優先するものがある」という宣言書だ。食事中はカバンの中、もしくは画面を下にしてポケットへ。通知音もオフにしろ。これだけで「大切にされている」という印象が段違いに変わる。逆に言えば、これすらできない男は「基本的な配慮ができない人間」として永久に記憶される。",
  },
  {
    title: "「俺は〇〇だから」と自分語りの前置きを多用する",
    description:
      "この言い回しが口癖になっている時点で、あなたは「自分の話しかしない退屈な男」リストに入っている。彼女は頷きながら、内心では「また始まった。いつ終わるんだろう」と時計を見ている。自分の価値観を語ること自体は悪くない。問題は頻度とタイミングだ。相手の話の流れを遮って自分語りに入る男は「この人は私に興味がない」と判定される。自分の話は、聞かれたときに簡潔に返せ。聞かれてもいないのに語り出す男に、次のデートはない。余白を残せ。余白を残すほど、相手はあなたに興味を持つ。",
  },
  {
    title: "会った直後に次の約束を取り付けようとする",
    description:
      "楽しい時間の直後に「次いつ会える？」と聞く男を、女はこう見ている。「必死だな」「余裕がないな」「ちょっと怖い」。あなたが積極性だと思っているその行動は、相手にとっては「余韻を楽しむ時間を奪う暴力」だ。今日の余韻を噛み締める間もなく次の予定を迫られるプレッシャー。これが繰り返されると、相手は「この人といると疲れる」という結論に達する。ベストは翌日に「昨日はありがとう。〇〇の話、もっと聞きたかったな」と一通送る程度。次の誘いは3日以降に、自然な流れで。焦る男は負ける。覚えておけ。",
  },
];

export const sevenDayPlan: { day: number; title: string; mission: string }[] = [
  {
    day: 1,
    title: "5点セルフチェックの習慣化",
    mission:
      "鏡の前で爪・鼻毛・眉・歯・服のにおいを確認せよ。これは清潔感の問題ではない。「自分という商品を管理する能力」の証明だ。スマホのリマインダーに「毎朝7:00 身だしなみチェック」をセットしろ。明日から始めるのではなく、今日から始めろ。",
  },
  {
    day: 2,
    title: "聞く力トレーニング",
    mission:
      "今日一日、誰かとの会話で「相手の話を最後まで聞いてから話す」を徹底せよ。話したくなったら3秒待ってから口を開け。この3秒が、あなたを「話を聞ける男」に変える。話を遮る男は、相手の存在を軽視している。それは無意識の侮辱だ。",
  },
  {
    day: 3,
    title: "お店ストック作り",
    mission:
      "行きたいエリアで「デート向きの店」を3軒リストアップせよ。食べログやGoogleマップで口コミを確認し、1軒は今週中に下見に行く予定を入れろ。「どこでもいいよ」と言う男は、リーダーシップの放棄を宣言している。店を知っていることは「準備ができている男」の証だ。",
  },
  {
    day: 4,
    title: "LINE返信テンポの見直し",
    mission:
      "今日のLINEで「即レスしない」を実践せよ。相手のメッセージから30分〜1時間空けて返信しろ。これは駆け引きではない。「この人は自分の生活がある」という印象を与える戦略だ。即レスは好印象ではなく「暇人」のシグナル。焦りを手放せ。",
  },
  {
    day: 5,
    title: "所作の意識化",
    mission:
      "食事の際、箸の持ち方・噛む速度・グラスの扱いを意識せよ。食べ終わった食器をきれいに揃える癖をつけろ。所作は、あなたの人生の履歴書だ。育ちは変えられないが、所作は今日から変えられる。今日の食事から、自分を観察しろ。",
  },
  {
    day: 6,
    title: "視線と声のコントロール",
    mission:
      "会話中「2秒見つめて、ふっと外す」を意識せよ。声のトーンを半音下げ、スピードを普段の8割に落として話してみろ。これは「色気」の訓練だ。色気は生まれつきではない。技術だ。今日から意識すれば、1ヶ月後には別人になれる。",
  },
  {
    day: 7,
    title: "総仕上げ：模擬デートプラン",
    mission:
      "架空のデートプランを1つ組め。店選び→服装→会話のネタ3つ→会計方法→別れ際のセリフまでシミュレーションしろ。紙に書き出して、7日間の学びを統合せよ。準備なき者に勝利はない。戦う前に、すでに勝負は決まっている。",
  },
];

export const lineTemplates: { label: string; scene: string; template: string; point: string }[] = [
  {
    label: "初回の誘い",
    scene: "マッチング後、初めて会う約束を取り付ける",
    template:
      "こないだ話してた〇〇、気になって調べたら△△ってお店が良さそうだった。もしよかったら今度行ってみない？",
    point:
      "唐突な「ご飯行こう」は素人の仕業だ。相手との会話の延長線上で誘え。共通の話題を起点にすることで、誘いは「提案」になり、断りにくくなる。これは誘導ではない。心理戦だ。",
  },
  {
    label: "日程調整",
    scene: "具体的な日時を決める",
    template:
      "来週だと木曜か土曜が空いてるんだけど、どっちか都合いい日ある？ なければ再来週でも全然！",
    point:
      "選択肢を2つ出しつつ「急がない」ことを示せ。これが「余裕」の見せ方だ。一つしか提示しない男は強引、何も提示しない男は無能。相手にプレッシャーを与えず、かつ主導権は握る。このバランスを制する者が勝つ。",
  },
  {
    label: "デート後のお礼",
    scene: "デート当日の夜〜翌日",
    template: "今日はありがとう！〇〇の話すごく面白かった。帰り道気をつけてね。",
    point:
      "シンプルに感謝＋具体的な話題への言及＋相手への気遣い。この3要素だけでいい。長文は「必死さ」を露呈する。余韻を残せ。「もっと話したかった」と思わせるのが正解だ。語りすぎる男に、次はない。",
  },
  {
    label: "自然なフェード対応",
    scene: "相手の反応が薄くなったとき",
    template: "最近忙しそうだね。落ち着いたらまた連絡してよ。〇〇の続き聞きたいから。",
    point:
      "追いかけるな。しかし扉は閉めるな。「忙しそう」は相手を責めない言い訳を与える。「連絡してよ」は主導権を相手に渡す。追えば逃げ、引けば寄る。この力学を忘れた男は、ブロックされて終わる。",
  },
];

export function getGradeComment(grade: string): string {
  switch (grade) {
    case "S":
      return "あなたは「モテ」という次元をすでに超えている。技術ではなく、存在そのものが魅力を放つ領域だ。ここからは磨くのではなく、自分のスタイルを楽しめ。ただし、慢心した瞬間から転落が始まる。王者は常に研鑽を怠らない。";
    case "A":
      return "高水準だ。基本は完成している。あとは「意識してやっていること」を「無意識の所作」に昇華させるだけ。その差は小さいようで、実は決定的な溝だ。あと一歩。その一歩を踏み出せる者だけがSの領域に入る。";
    case "B":
      return "平均以上だが、まだ「頭で考えて動いている」段階だ。それは見抜かれている。「頑張っている感」が出ている男は、女から見ると滑稽だ。いくつかの弱点を潰し、行動を無意識化せよ。そうすれば、Sランクも射程圏内に入る。";
    case "C":
      return "課題は山積みだ。だが、課題が見えているということは、改善の余地があるということでもある。ここから這い上がれるかどうかは、このレポートを読んだ後の「行動」にかかっている。知識だけでは何も変わらない。動け。";
    case "D":
      return "現実を直視しろ。今のあなたは「恋愛市場において存在していない」に等しい。厳しいことを言うが、これは事実だ。だが絶望するな。今まで「知らなかっただけ」だ。ここから先は上がるしかない。レポートを叩き込み、一つずつ実践しろ。這い上がる者だけが、景色を変えられる。";
    default:
      return "";
  }
}

export function getFactorComment(factor: FactorKey, score: number): string {
  const level = score >= 75 ? "high" : score >= 45 ? "mid" : "low";
  const comments: Record<FactorKey, Record<string, string>> = {
    cleanliness: {
      high: "清潔感は武器になっている。自然体で好印象を与えられる領域だ。ただし、油断するな。加齢は容赦なく進む。維持こそが最大の戦いだ。",
      mid: "基本はできているが、細部にムラがある。ムラは「この人、詰めが甘い」という印象を与える。ルーティン化して、無意識レベルで管理できる状態を目指せ。",
      low: "致命傷だ。ここが低い時点で、他のスコアがいくら高くても無意味になる。清潔感のない男は「生理的に無理」の一言で切り捨てられる。最優先で改善せよ。",
    },
    conversation: {
      high: "会話力は確実に武器になっている。相手を心地よくさせる力がある。次のステージは「沈黙すら支配する」領域だ。",
      mid: "悪くないが「聞く」と「話す」のバランスに改善余地がある。自分では気づいていないが、まだ「自分の話」の比率が高い。意識して聞く側に回れ。",
      low: "自覚しろ。あなたは「話を聞かない男」として認識されている。相手が頷いているのは同意ではなく諦めだ。まず「3秒待ってから話す」ルールを導入しろ。それすらできないなら、会話する資格がない。",
    },
    money: {
      high: "金の使い方にセンスがある。余裕のある印象を自然に出せている。金額ではなく「選択」で魅せる男だ。その調子を維持せよ。",
      mid: "悪くないが、時々「見せ方」でもったいないことをしている。センスの良さが伝わりきっていない。店選び・会計の所作を見直せ。",
      low: "金遣いが荒いのは論外だが、ケチな男はそれ以下だ。あなたは「堅実」なのではなく「夢を見せられない男」として分類されている。金額の問題ではない。使い方を学べ。",
    },
    distance: {
      high: "距離感の制御が上手い。相手に安心感を与えられる強みだ。この感覚を言語化し、意識的に再現できるようになれば、さらに上のステージに行ける。",
      mid: "基本的な距離感は保てるが、熱が入ると近づきすぎる傾向がある。追えば逃げる。この力学を忘れるな。冷静さを保て。",
      low: "距離を詰めすぎている。あなたが「好意」だと思っている行動は、相手からすれば「圧」だ。既読スルーに追撃、誘いを断られて理由を聞く。これらは「怖い男」の行動パターンだ。一歩引け。今すぐに。",
    },
    sexAppeal: {
      high: "所作や佇まいに色気がある。大人の魅力が自然と出ている。次のステージは、その色気を「コントロールする」領域だ。出すべき時に出し、引くべき時に引く。",
      mid: "ポテンシャルはあるが、まだ開花していない。視線・声・所作のどれかに偏りがある。バランスよく磨けば、確実に光る。",
      low: "色気がゼロに近い。だが悲観するな。色気は先天的なものではなく、後天的に身につけられる「技術」だ。視線・声・所作。この3つから始めろ。1ヶ月後には別人になれる。",
    },
  };
  return comments[factor][level];
}

// ========== タイプ診断 ==========
// グレード × 最弱因子の組み合わせでタイプを決定

export type TypeLabel = {
  title: string;
  subtitle: string;
};

const TYPE_LABELS: Record<string, TypeLabel> = {
  // グレードS/A（高スコア）
  S: { title: "静かなる支配者", subtitle: "存在そのものが引力を持つ" },
  A: { title: "完成間近の策士", subtitle: "あと一歩で頂点に届く" },

  // グレードB + 最弱因子で分岐
  B_cleanliness: { title: "磨けば光る原石", subtitle: "細部の詰めが甘い惜しい男" },
  B_conversation: { title: "独演会の帝王", subtitle: "聞く技術を覚えれば化ける" },
  B_money: { title: "センスなき散財家", subtitle: "金の美学を学べば跳ねる" },
  B_distance: { title: "距離感バグ男", subtitle: "引き際を知れば世界が変わる" },
  B_sexAppeal: { title: "無害な空気", subtitle: "毒にも薬にもならない男" },

  // グレードC + 最弱因子で分岐
  C_cleanliness: { title: "生活感ダダ漏れおじさん", subtitle: "まず鏡を見ろ" },
  C_conversation: { title: "聞く耳を持たない男", subtitle: "相手は諦めて頷いている" },
  C_money: { title: "夢を見せられない男", subtitle: "ケチは色気を殺す" },
  C_distance: { title: "無自覚ストーカー予備軍", subtitle: "その好意は相手に圧を与えている" },
  C_sexAppeal: { title: "枯れた中年の入口", subtitle: "このままでは加速度的に老ける" },

  // グレードD + 最弱因子で分岐
  D_cleanliness: { title: "生理的に無理判定の男", subtitle: "清潔感ゼロは即アウト" },
  D_conversation: { title: "会話ドロボー", subtitle: "誰もあなたの話を聞きたくない" },
  D_money: { title: "器の小ささ露呈男", subtitle: "金の使い方で人格がバレている" },
  D_distance: { title: "ブロック確定男", subtitle: "追えば追うほど逃げられる" },
  D_sexAppeal: { title: "存在感ゼロの透明人間", subtitle: "いてもいなくても同じ" },
};

export function getTypeLabel(grade: string, weakestFactor: FactorKey): TypeLabel {
  // S/Aグレードはシンプルにグレードのみで判定
  if (grade === "S") return TYPE_LABELS["S"];
  if (grade === "A") return TYPE_LABELS["A"];

  // B/C/Dグレードは最弱因子との組み合わせ
  const key = `${grade}_${weakestFactor}`;
  return TYPE_LABELS[key] || { title: "診断完了", subtitle: "レポートで詳細を確認" };
}
